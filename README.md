<div align="center">
  <picture>
    <source media="(prefers-color-scheme: dark)" srcset="https://github.com/user-attachments/assets/1d8b44f1-1999-4cfb-8744-32871056c253">
    <img alt="kuva-space-logo" src="https://github.com/user-attachments/assets/d8f47cc8-1491-4d0c-a8cf-318ea7e0afdc" width="50%">
  </picture>
</div>

# Kuva Data Processing

[![kuva-geometry](https://img.shields.io/pypi/v/kuva-geometry.svg?label=kuva-geometry)](https://pypi.org/project/kuva-geometry/)
[![kuva-metadata](https://img.shields.io/pypi/v/kuva-metadata.svg?label=kuva-metadata)](https://pypi.org/project/kuva-metadata/)
[![kuva-reader](https://img.shields.io/pypi/v/kuva-reader.svg?label=kuva-reader)](https://pypi.org/project/kuva-reader/)

This project is for tools to read and process data products
generated by the Kuva Space Hyperfield satellites.

### Status of unit tests

[![Unit tests for kuva-geometry](https://github.com/KuvaSpace/kuva-data-processing/actions/workflows/test-kuva-geometry.yml/badge.svg?branch=main)](https://github.com/KuvaSpace/kuva-data-processing/actions/workflows/test-kuva-geometry.yml?branch=main)
[![Unit tests for kuva-metadata](https://github.com/KuvaSpace/kuva-data-processing/actions/workflows/test-kuva-metadata.yml/badge.svg?branch=main)](https://github.com/KuvaSpace/kuva-data-processing/actions/workflows/test-kuva-metadata.yml?branch=main)
[![Unit tests for kuva-reader](https://github.com/KuvaSpace/kuva-data-processing/actions/workflows/test-kuva-reader.yml/badge.svg?branch=main)](https://github.com/KuvaSpace/kuva-data-processing/actions/workflows/test-kuva-reader.yml?branch=main)

## Project contents

The data reader consists of two sub-projects:

1. `kuva-metadata`, which contains metadata definitions of all the different parts and
devices of the Kuva products
2. `kuva-reader`, which can be used to read data products produced by Hyperfield in a
Pythonic way. Given a geotiff and its metadata sidecar file, a data product can be
loaded and processed.
3. `kuva-geometry`, which contains some helper functionalities and class definitions for
calculating geometric properties, such as camera ray intersections on the Earth.


# Installation

Installation is done simply through PyPi. You may install one of the sub-packages individually, but the `kuva-reader` package allows you to read Kuva Space data products, and it includes the two other sub-projects as dependencies.

```sh
pip install kuva-reader
```

The installation is recommended to be done in a Python virtual environment. If you do not have one, follow the instructions below to install it.

If you are interested in contributing to the codebase, source installation information is given in [CONTRIBUTING.md](CONTRIBUTING.md).

We recommend using Python version 3.12 for `kuva-datareader`, but it is tested in versions 3.10 - 3.13.

# Kuva Reader minimal example

This is a minimal example that allows you to read and print the image shape of a L1 product. \
The result product is in this case an L2A product (as seen from the folder name).
The loaded product is stored in a `rioxarray` object, which contains extensive GIS functionalities [(examples for usage)](https://corteva.github.io/rioxarray/stable/examples/examples.html).

```python
from kuva_reader import read_product

l2a_product = read_product("my_data_folder/hyperfield1a_L2A_20250105T092548")
print(l2a_product)  # Will show some main information such as image shape and CRS
```

This assumes a mostly untouched folder after distributing. Otherwise, you may need to
read the product manually. Available product levels are L0, L1AB, L1C and L2A and they
can be read as such:

```python
from kuva_reader import Level2AProduct

l2a_product = Level2AProduct("your/l2a/folder")
```

The actual raster image is stored and can be analysed in `product.image`, while metadata
information of the product is in `product.metadata`. 

# Contributing and development

Please follow the guidelines in [CONTRIBUTING.md](CONTRIBUTING.md).

Also, please follow our [Code of Conduct](CODE_OF_CONDUCT.md) while discussing in the
issues and pull requests.

# Contact information

For questions or support, please open an issue. If you have been given a support contact,
feel free to send them an email explaining your issue.

# License

The `kuva-data-processing` repository software is under the [MIT license](LICENSE.md).
